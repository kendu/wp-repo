#!/bin/bash

################################################################################
#                                                                              #
#                                 {o,o}                                        #
#                                 |)__)                                        #
#                                 -"-"-                                        #
#                                                                              #
################################################################################

#################################---ENV---######################################

set -e
set -u

################################################################################

##############################---VARIABLES---###################################

REMOTE_SERVER="ocelot.kendu.si"
REMOTE_DIRECTORY="wp-repo"

################################################################################

##############################---FUNCTIONS---###################################

function checkRequirements() {
    if [ -z "$(which unison)" ]
    then
        echo "INFO: Unison not found, installing"
        apt-get update && \
        apt-get install --yes unison
    fi
}

function syncFiles() {
    unison wp "ssh://unison@${REMOTE_SERVER}:56871/${REMOTE_DIRECTORY}"
}

################################################################################

###############################---EXECUTION---##################################

checkRequirements
syncFiles

################################################################################
